/*!
 * Mowe Webtal Project v0.9.9 (http://gomowe.org/)
 * Copyright 2013-2015 Noibe Developers
 * Licensed under MIT (https://github.com/noibe/villa/blob/master/LICENSE)
 */
function distinctCity(e,t){e.addEventListener("change",cityHandler,!1),e.b=t,doCityDistinct(e,t)}function doWipe(e){for(var t=e.length;t--;)e[t].style.width=100*e[t].getElementsByClassName("frame").length+"%"}var _emailService="eduardo@noibe.com",_emailServiceURL="http://letsmowe.com/wtal/i/mail/",emailServiceCount=4,emailServiceClickCount=8,sendResponse;sendResponse=function(){var e=$(this).parent(),t=$(e).find("[name=name]").val(),a=$(e).find("[name=phone]").val(),n=document.getElementById("city").value;if(emailServiceClickCount>0)if(t.length>0&&a.length>0){emailServiceClickCount--;var i=$(e).parent().parent(),s={city:n,name:t,phone:a,product:$(e).find(".title").html(),reference:$(i).attr("data-product-reference"),mail:_emailService};emailServiceCount>0?$.ajax({cache:!1,data:s,error:function(t){$(e).removeClass("active-form"),$(e).addClass("fail")},success:function(t){$(e).removeClass("active-form"),$(e).addClass("success"),emailServiceCount--},url:_emailServiceURL}):($(e).removeClass("active-form"),$(e).addClass("fail"))}else alert("Campos vazios");else $(e).removeClass("active-form"),$(e).addClass("fail")};var toggleForm;toggleForm=function(){$(".pricelist .content > .success").removeClass("success").find("[data-toggle=contact-form]").html("Assine Já"),$(".pricelist .content > .fail").removeClass("fail").find("[data-toggle=contact-form]").html("Assine Já");var e,t,a=$(this).parent();$(a).hasClass("active-form")&&($(a).removeClass("active-form"),$(a).find("[data-toggle=contact-form]").html("Assine Já"),e=!0),t=$(".pricelist .content > .active-form"),t.length&&($(t).removeClass("active-form"),$(t).find("[data-toggle=contact-form]").html("Assine Já")),e||($(a).addClass("active-form"),$(this).html("Voltar"),$(a).find("[name=name]").focus())};var appendForm;appendForm=function(){var e='<a class="action user-unselect cursor-pointer toggle-contact-form">Assine Já</a><input type="text" class="contact-form" name="name" placeholder="Nome" autocomplete="off"/><input type="tel" class="contact-form" name="phone" placeholder="Telefone (apenas números)" autocomplete="off" maxlength="11"/><input type="submit" class="contact-form action response-send user-unselect cursor-pointer" value="Solicitar Contato!"/><span class="action sent">Obrigado! :D<br/>Entraremos em contato em breve!</span><span class="action not-sent">Ops! :(<br/>Houve algum problema! Tente novamente mais tarde!</span>';$(".pricelist .content > li").insertHTML(e);var t,a=document.getElementsByClassName("toggle-contact-form"),n=document.getElementsByClassName("response-send");for(t=a.length;t--;)a[t].addEventListener("click",toggleForm);for(t=n.length;t--;)n[t].addEventListener("click",sendResponse)};var citySetMargin;citySetMargin=function(e,t){e.style.marginLeft=100*t+"%"};var citySetClass;citySetClass=function(e,t,a){for(var n=e.length;n--;)t.classList.remove(e[n].value);t.classList.add(a)};var cityGetIndex;cityGetIndex=function(e,t){for(var a=e.length;a--;)if(e[a].value==t)return-a;return 0};var doCityDistinct;doCityDistinct=function(e,t){var a,n;n=e.value,a=cityGetIndex(e.children,n),citySetClass(e.children,t,n),citySetMargin(t,a)};var cityHandler;cityHandler=function(){doCityDistinct(this,this.b)},window.addEventListener("load",appendForm);